<main [attr.data-bs-theme]="isDarkMode() ? 'dark' : 'light'">
  <div class="bg-body-tertiary min-vh-100">
    <div class="container py-4 py-md-5">
      <!-- Header -->
      <header
        class="d-flex align-items-center justify-content-between mb-4 pb-3 border-bottom"
      >
        <div class="d-flex align-items-center gap-3">
          <svg
            class="text-primary"
            style="width: 40px; height: 40px"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M17.25 6.75 22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3-4.5 12"
            />
          </svg>
          <h1 class="h2 mb-0" [ngClass]="isDarkMode() ? 'text-light' : 'text-dark'">
            CodeShare
          </h1>
        </div>

        <!-- Bootstrap Theme Switcher (Form Switch) -->
        <div class="form-check form-switch fs-5">
          <input
            class="form-check-input"
            type="checkbox"
            role="switch"
            id="themeSwitcher"
            [checked]="isDarkMode()"
            (change)="toggleTheme()"
          />
          <label class="form-check-label" for="themeSwitcher">{{
            isDarkMode() ? "ğŸŒ™" : "â˜€ï¸"
          }}</label>
        </div>
      </header>

      <!-- Code Editor -->
      <div class="mb-3">
        <textarea
          #textarea
          placeholder="Paste your code here..."
          class="form-control form-control-lg font-monospace shadow-sm"
          rows="12"
          [value]="code()"
          (input)="code.set(textarea.value)"
        ></textarea>
      </div>

      <!-- Save Button -->
      <div class="d-grid">
        <button
          (click)="saveCode()"
          [disabled]="isLoading() || code().trim() === ''"
          class="btn btn-primary btn-lg d-flex align-items-center justify-content-center gap-2"
        >
          <span *ngIf="!isLoading()">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              style="width: 24px; height: 24px"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"
              />
            </svg>
          </span>
          <span
            *ngIf="isLoading()"
            class="spinner-border spinner-border-sm"
            role="status"
            aria-hidden="true"
          ></span>
          {{ isLoading() ? "Saving..." : "Save & Get Link" }}
        </button>
      </div>

      <!-- Shareable Link Section (Bootstrap Alert) -->
      <div
        *ngIf="shareableLink()"
        class="alert alert-success mt-4 shadow-sm"
        role="alert"
      >
        <h4 class="alert-heading">Your link is ready!</h4>
        <div class="input-group">
          <input
            type="text"
            readonly
            [value]="shareableLink()"
            class="form-control font-monospace"
          />
          <button (click)="copyLink()" class="btn btn-outline-success">
            Copy Link
          </button>
        </div>
      </div>

      <!-- Error Message Section (Bootstrap Alert) -->
      <div *ngIf="errorMessage()" class="alert alert-danger mt-4" role="alert">
        <h4 class="alert-heading">An Error Occurred</h4>
        <p class="mb-0">{{ errorMessage() }}</p>
      </div>
    </div>
  </div>
</main>
